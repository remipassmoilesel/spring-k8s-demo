apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: spring-k8s-demo
spec:
  replicas: 3
  template:
    metadata:
      labels:
        app: spring-k8s-demo
    spec:
      containers:
      - name: spring-k8s-demo
        image: spring-k8s-demo:0.1
        ports:
        - containerPort: 8085
        env:
          - name: K8SDEMO_ACTIVE_PROFILE
            value: prod
          - name: K8SDEMO_DBNAME
            value: k8sdemo
          - name: K8SDEMO_DBNAME_DEV
            value: k8sdemo_dev
          - name: K8SDEMO_DB_URL
            value: jdbc:mysql://192.168.0.16:3306/
          - name: K8SDEMO_DB_USERNAME
            value: k8sdemo
          - name: K8SDEMO_DB_PASSWORD
            value: ad7598938574b282cd347469ead2c561d4f4aaa0a0a86ae793181f3887748ea29a6372ddde784f936e67228cd49c93e4730ccdd48296987c74a326a89a
          - name: K8SDEMO_LOGIN
            value: admin
          - name: K8SDEMO_PASSWORD
            value: admin
        livenessProbe:
          httpGet:
            path: /
            port: 8085
          initialDelaySeconds: 10
          periodSeconds: 3